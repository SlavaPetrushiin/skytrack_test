(this.webpackJsonpskytrack_test=this.webpackJsonpskytrack_test||[]).push([[0],{70:function(e,t,a){e.exports=a(88)},75:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),c=a.n(i),o=(a(75),a(110)),l=a(126),s=a(112),m=a(113),u=a(115),g=a(114),E=a(59),f=a.n(E),d=a(29),h=Object(o.a)((function(e){return Object(l.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},link:{color:"white",textDecoration:"none",marginLeft:20,fontSize:"1.25rem",fontWeight:500,letterSpacing:"0.0075em"}})}));function p(){var e=h();return r.a.createElement("div",{className:e.root},r.a.createElement(s.a,{position:"static"},r.a.createElement(m.a,null,r.a.createElement(g.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(f.a,null)),r.a.createElement(u.a,{variant:"h6",className:e.title},"Images"),r.a.createElement(d.b,{className:e.link,to:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(d.b,{className:e.link,to:"/history"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"))))}var O=a(117),b=a(120),v=a(118),I=a(121),j=a(119),S=a(20),_=function(e){return{type:"FETCH_IMAGE_SUCCESS",image:e}},w=a(124),y=function(e){return r.a.createElement(w.a,{severity:"error"},e.errorMessage)},k=Object(o.a)({root:{minWidth:275},media:{height:0,paddingTop:"56.25%"}}),N=function(e){var t=k(),a=Object(S.c)((function(e){return e.error.errorMessage}));return r.a.createElement(r.a.Fragment,null,!!a&&r.a.createElement(y,{errorMessage:a}),r.a.createElement(O.a,{className:t.root},r.a.createElement(v.a,null,r.a.createElement(j.a,{component:"div",className:t.media,image:e.image.image.url})),r.a.createElement(b.a,null,r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:e.handleClick},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"))))},C=function(){var e=Object(S.b)(),t=Object(S.c)((function(e){return e.images}));Object(n.useEffect)((function(){e({type:"REQUEST_IMAGE"})}),[e]);return r.a.createElement(N,{image:t,handleClick:function(){e({type:"REQUEST_IMAGE"})}})},D=a(51),x=a(123),M=function(e){var t=e.paginationImagesCount,a=e.handleClickPagination;return r.a.createElement(x.a,{count:t,onChange:a,color:"primary"})},T=Object(o.a)({imageItems:{padding:0},imageItem:{padding:0,listStyle:"none",marginBottom:30},media:{height:0,paddingTop:"46.25%",marginBottom:20},title:{fontWeight:"bold"}}),A=function(e){var t=T();return r.a.createElement("li",{className:t.imageItem},r.a.createElement("p",{className:t.title},e.title),r.a.createElement("p",null,e.date),r.a.createElement(j.a,{component:"div",className:t.media,image:e.url}),r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:e.handleDeleteImage},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))},G=function(e){var t=e.images,a=e.handleDeleteImage,n=T();return r.a.createElement("ul",{className:n.imageItems},t.map((function(e){return r.a.createElement(A,Object.assign({},e,{key:e.id,handleDeleteImage:function(t){return a(t,e.id)}}))})))},R=a(40),W={KEYS:{images:"images"},getImages:function(){return localStorage.getItem(this.KEYS.images)?JSON.parse(localStorage.getItem(this.KEYS.images)):(localStorage.setItem("images",JSON.stringify([])),!1)},saveImages:function(e){if(this.getImages()){var t=this.getImages(),a=[].concat(Object(R.a)(t),[e]);localStorage.setItem(this.KEYS.images,JSON.stringify(a))}},removeImage:function(e){var t=this.getImages().filter((function(t){return t.id!==e}));localStorage.setItem(this.KEYS.images,JSON.stringify(t))}},L=function(e){var t=e.handleClickPagination,a=e.newImages,n=e.paginationImagesCount,i=e.handleDeleteImage;return r.a.createElement("div",null,r.a.createElement(M,{handleClickPagination:t,paginationImagesCount:n}),r.a.createElement(G,{images:a,handleDeleteImage:i}))},U=function(){var e=Object(S.c)((function(e){return e.images})),t=Object(S.b)(),a=Object(n.useState)(5),i=Object(D.a)(a,1)[0],c=Object(n.useState)(1),o=Object(D.a)(c,2),l=o[0],s=o[1],m=Math.ceil(e.images.length/i),u=l*i,g=e.images.slice((l-1)*i,u);return r.a.createElement(L,{handleClickPagination:function(e,t){s(t)},newImages:g,paginationImagesCount:m,handleDeleteImage:function(e,a){t(function(e){return{type:"DELETE_IMAGE",id:e}}(a)),W.removeImage(a)}})},B=a(122),J=a(9),K=Object(o.a)({container:{paddingTop:40}});var Y=function(){var e=K(),t=Object(S.b)();return Object(n.useEffect)((function(){if(W.getImages()){var e=W.getImages();t(function(e){return{type:"DOWNLOAD_IMAGES",images:e}}(e))}}),[t]),r.a.createElement("div",null,r.a.createElement(p,null),r.a.createElement(B.a,{maxWidth:"sm",className:e.container},r.a.createElement(J.c,null,r.a.createElement(J.a,{exact:!0,path:"/",component:C}),r.a.createElement(J.a,{path:"/history",component:U}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(22),H=a(62),P=a(32),Q={image:{},images:[]},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_IMAGE_SUCCESS":return Object(P.a)({},e,{image:t.image,images:[].concat(Object(R.a)(e.images),[t.image]),error:null});case"DOWNLOAD_IMAGES":return Object(P.a)({},e,{images:Object(R.a)(t.images),error:null});case"DELETE_IMAGE":return Object(P.a)({},e,{images:e.images.filter((function(e){return e.id!==t.id})),error:null});default:return e}},V=a(61),z=a(26),$=a.n(z),q=a(33),Z={getImage:function(){return fetch("https://api.giphy.com/v1/gifs/random?api_key=gR30u9O8KPOanwIQupHbD90d4k57EOeY")}},ee=$.a.mark(ae),te=$.a.mark(ne);function ae(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)("REQUEST_IMAGE",ne);case 2:case"end":return e.stop()}}),ee)}function ne(){var e,t;return $.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(q.a)(re);case 3:return e=a.sent,t={id:e.image_url,title:e.title,date:(new Date).toString(),url:e.image_url},a.next=7,Object(q.a)((function(){return W.saveImages(t)}));case 7:return a.next=9,Object(q.b)(_(t));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(q.b)({type:"FETCH_IMAGE_ERROR",error:a.t0.message});case 15:case"end":return a.stop()}}),te,null,[[0,11]])}function re(){return ie.apply(this,arguments)}function ie(){return(ie=Object(V.a)($.a.mark((function e(){var t,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.getImage();case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent.data,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce={errorMessage:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_IMAGE_ERROR":return Object(P.a)({},e,{errorMessage:t.error});default:return e}},le=Object(H.a)(),se=Object(F.c)({images:X,error:oe}),me=Object(F.e)(se,Object(F.d)(Object(F.a)(le),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));le.run(ae),window.store=me;var ue=me;c.a.render(r.a.createElement(S.a,{store:ue},r.a.createElement(d.a,null,r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.e45b233f.chunk.js.map